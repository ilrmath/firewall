<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FWå‹•ä½œãƒ‡ãƒ¢ï¼ˆå‹•çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°è¡¨ç¾ç‰ˆï¼‰</title>
<style>
  body {
    font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", sans-serif;
    display: flex; flex-direction: column; align-items: center;
    background-color: #f4f6f9; padding: 20px; color: #333;
  }

  .controls { margin-bottom: 20px; display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
  .btn { padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 13px; color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .btn-auto { background-color: #34495e; }
  .btn-green { background-color: #27ae60; } 
  .btn-blue { background-color: #3498db; }  
  .btn-red { background-color: #e74c3c; }   
  .active-mode { outline: 4px solid rgba(0,0,0,0.15); transform: scale(1.05); }

  .status-text {
    margin-top: 5px; font-weight: bold; font-size: 17px; color: #2c3e50;
    height: 55px; margin-bottom: 15px; text-align: center; background: #fff;
    padding: 8px 25px; border-radius: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    display: flex; align-items: center; justify-content: center;
    min-width: 600px;
  }

  .container {
    position: relative; width: 900px; height: 600px; background-color: white;
    border-radius: 12px; box-shadow: 0 4px 25px rgba(0,0,0,0.15); overflow: hidden;
  }

  .bg-layer { position: absolute; width: 100%; height: 100%; z-index: 1; }
  .cable-h { position: absolute; top: 220px; left: 180px; width: 580px; height: 12px; background-color: #bdc3c7; border-radius: 6px; }
  .cable-v-dmz { position: absolute; top: 220px; left: 440px; width: 12px; height: 180px; background-color: #bdc3c7; }
  .cable-v-internal { position: absolute; top: 220px; left: 700px; width: 12px; height: 80px; background-color: #bdc3c7; }

  .zone-internet { position: absolute; top: 140px; left: 30px; width: 220px; text-align: center; }
  .firewall { position: absolute; top: 150px; left: 420px; width: 55px; height: 160px; background: repeating-linear-gradient(45deg, #d35400, #d35400 12px, #e67e22 12px, #e67e22 24px); border: 4px solid #a04000; z-index: 5; }
  .zone-internal { position: absolute; top: 310px; left: 640px; text-align: center; width: 140px; }
  .zone-dmz { position: absolute; top: 410px; left: 365px; width: 160px; padding: 20px; border: 4px dashed #f1c40f; background-color: #fffdf0; border-radius: 15px; text-align: center; }

  /* å¹å‡ºã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
  #fw-message {
    position: absolute; top: 80px; left: 320px; width: 260px;
    background-color: #2c3e50; color: white; padding: 10px;
    border-radius: 10px; font-size: 13px; font-weight: bold;
    text-align: center; opacity: 0; z-index: 10; pointer-events: none;
  }
  #fw-message::after {
    content: ""; position: absolute; top: 100%; left: 50%; margin-left: -10px;
    border-width: 10px; border-style: solid; border-color: #2c3e50 transparent transparent transparent;
  }

  .overlay-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 20; }
  .packet { opacity: 0; }
  .p-icon { font-size: 50px; text-anchor: middle; dominant-baseline: middle; }
  .p-text { font-size: 18px; font-weight: bold; text-anchor: middle; }

  .eye-to-left { transform: scaleX(-1); transform-box: fill-box; transform-origin: center; } 
  .eye-to-right { transform: scaleX(1); } 

  /* â‘  ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ â‡’ DMZ é–²è¦§ */
  @keyframes path-ext-view {
    0%   { opacity: 0; transform: translate(140px, 215px); }
    5%   { opacity: 1; transform: translate(140px, 215px); }
    40%  { transform: translate(435px, 215px); }
    50%  { transform: translate(435px, 420px); }
    60%  { transform: translate(435px, 420px); }
    70%  { transform: translate(435px, 215px); }
    95%  { opacity: 1; transform: translate(140px, 215px); }
    100% { opacity: 0; transform: translate(140px, 215px); }
  }

  /* â‘¡ å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ â‡’ DMZ é–²è¦§ */
  @keyframes path-int-view {
    0%   { opacity: 0; transform: translate(700px, 320px); }
    5%   { opacity: 1; transform: translate(700px, 320px); }
    30%  { transform: translate(700px, 215px); }
    45%  { transform: translate(435px, 215px); }
    50%  { transform: translate(435px, 420px); }
    60%  { transform: translate(435px, 420px); }
    70%  { transform: translate(435px, 215px); }
    85%  { transform: translate(700px, 215px); }
    95%  { opacity: 1; transform: translate(700px, 320px); }
    100% { opacity: 0; transform: translate(700px, 320px); }
  }

  /* â˜…â‘¥ å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ â‡’ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆï¼ˆå–å¾—ï¼‰ï¼‹æˆ»ã‚Šé€šä¿¡ */
  @keyframes path-int-net {
    0%   { opacity: 0; transform: translate(700px, 320px); }
    5%   { opacity: 1; transform: translate(700px, 320px); }
    25%  { transform: translate(700px, 215px); }
    40%  { transform: translate(435px, 215px); }
    55%  { transform: translate(140px, 215px); } /* ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå´ã«åˆ°é” */
    65%  { transform: translate(140px, 215px); }
    75%  { transform: translate(435px, 215px); } /* æˆ»ã‚Šé€šä¿¡ */
    85%  { transform: translate(700px, 215px); }
    95%  { opacity: 1; transform: translate(700px, 320px); }
    100% { opacity: 0; transform: translate(700px, 320px); }
  }

  /* FWãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚§ãƒ¼ãƒ‰ï¼ˆæˆ»ã‚Šé€šä¿¡æ™‚ã«è¡¨ç¤ºï¼‰ */
  @keyframes fw-msg-fade {
    0%, 65% { opacity: 0; transform: translateY(5px); }
    70%, 85% { opacity: 1; transform: translateY(0); }
    90%, 100% { opacity: 0; }
  }

  /* â‘¢ å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ â‡’ DMZ æ›´æ–° */
  @keyframes path-int-update {
    0%   { opacity: 0; transform: translate(700px, 320px); }
    10%  { opacity: 1; transform: translate(700px, 320px); }
    30%  { transform: translate(700px, 215px); }
    75%  { transform: translate(435px, 215px); }
    90%  { transform: translate(435px, 420px); opacity: 1; }
    100% { transform: translate(435px, 420px); opacity: 0; }
  }

  /* â‘£ DMZ â‡’ å†…éƒ¨ï¼ˆçªãæŠœã‘æŠ¼ã—æˆ»ã—ï¼‰ */
  @keyframes path-pushed-back-dmz {
    0%   { opacity: 0; transform: translate(435px, 420px); }
    5%   { opacity: 1; }
    35%  { transform: translate(435px, 215px); }
    50%  { transform: translate(490px, 215px); } 
    60%  { transform: translate(490px, 215px); }
    85%  { transform: translate(435px, 420px); opacity: 1; }
    100% { transform: translate(435px, 420px); opacity: 0; }
  }

  /* â‘¤ ãƒãƒƒãƒˆ â‡’ å†…éƒ¨ï¼ˆçªãæŠœã‘æŠ¼ã—æˆ»ã—ï¼‰ */
  @keyframes path-pushed-back-ext {
    0%   { opacity: 0; transform: translate(140px, 215px); }
    5%   { opacity: 1; }
    45%  { transform: translate(490px, 215px); }
    55%  { transform: translate(490px, 215px); }
    85%  { transform: translate(140px, 215px); opacity: 1; }
    100% { opacity: 0; transform: translate(140px, 215px); opacity: 0; }
  }

  /* å„ã‚¢ã‚¤ã‚³ãƒ³ãƒ‘ãƒ¼ãƒ„ã®è¡¨ç¤ºã‚¿ã‚¤ãƒŸãƒ³ã‚° */
  @keyframes icon-req-only { 0%, 55% { opacity: 1; } 56%, 100% { opacity: 0; } }
  @keyframes icon-res-only { 0%, 55% { opacity: 0; } 56%, 100% { opacity: 1; } }
  @keyframes icon-deny-switch { 0%, 52% { opacity: 1; } 53%, 100% { opacity: 0; } }
  @keyframes icon-deny-mark { 0%, 52% { opacity: 0; } 53%, 100% { opacity: 1; } }

  .mode-ext-view #p-ext-view { animation: path-ext-view 9s infinite ease-in-out; }
  .mode-ext-view #p-ext-view .req-part { animation: icon-req-only 9s infinite; }
  .mode-ext-view #p-ext-view .res-part { animation: icon-res-only 9s infinite; }

  .mode-int-view #p-int-view { animation: path-int-view 9s infinite ease-in-out; }
  .mode-int-view #p-int-view .req-part { animation: icon-req-only 9s infinite; }
  .mode-int-view #p-int-view .res-part { animation: icon-res-only 9s infinite; }
  .mode-int-view #fw-message { animation: fw-msg-fade 9s infinite ease-in-out; }

  /* â˜…â‘¥ å†…éƒ¨â‡’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ */
  .mode-int-net #p-int-net { animation: path-int-net 9s infinite ease-in-out; }
  .mode-int-net #p-int-net .req-part { animation: icon-req-only 9s infinite; }
  .mode-int-net #p-int-net .res-part { animation: icon-res-only 9s infinite; }
  .mode-int-net #fw-message { animation: fw-msg-fade 9s infinite ease-in-out; }

  .mode-int-update #p-int-update { animation: path-int-update 6s infinite ease-in-out; }
  
  .mode-dmz-atk #p-dmz-atk { animation: path-pushed-back-dmz 8s infinite ease-in-out; }
  .mode-dmz-atk .deny-req { animation: icon-deny-switch 8s infinite; }
  .mode-dmz-atk .deny-bad { animation: icon-deny-mark 8s infinite; }

  .mode-ext-atk #p-ext-atk { animation: path-pushed-back-ext 8s infinite ease-in-out; }
  .mode-ext-atk .deny-req { animation: icon-deny-switch 8s infinite; }
  .mode-ext-atk .deny-bad { animation: icon-deny-mark 8s infinite; }

</style>
</head>
<body>

<div class="controls">
  <button class="btn btn-auto active-mode" onclick="setMode('auto', this)">è‡ªå‹•å·¡å›</button>
  <button class="btn btn-green" onclick="setMode('ext-view', this)">â‘  ãƒãƒƒãƒˆâ‡’DMZé–²è¦§</button>
  <button class="btn btn-green" onclick="setMode('int-view', this)">â‘¡ å†…éƒ¨â‡’DMZé–²è¦§</button>
  <button class="btn btn-green" onclick="setMode('int-net', this)">â‘¢ å†…éƒ¨â‡’ãƒãƒƒãƒˆå–å¾—</button>
  <button class="btn btn-blue" onclick="setMode('int-update', this)">â‘£ å†…éƒ¨â‡’DMZæ›´æ–°</button>
  <button class="btn btn-red" onclick="setMode('dmz-atk', this)">â‘¤ DMZâ‡’å†…éƒ¨ (æ‹’å¦)</button>
  <button class="btn btn-red" onclick="setMode('ext-atk', this)">â‘¥ ãƒãƒƒãƒˆâ‡’å†…éƒ¨ (æ‹’å¦)</button>
</div>

<div class="status-text"><span id="status-display">è‡ªå‹•å†ç”Ÿä¸­...</span></div>

<div class="container" id="stage">
  <div class="bg-layer">
    <div id="fw-message">å†…éƒ¨ã‹ã‚‰ã®è¦æ±‚ã¸ã®è¿”ä¿¡ãªã®ã§<br>é€šéã‚’è¨±å¯ï¼ˆå‹•çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰</div>
    <div class="cable-h"></div><div class="cable-v-dmz"></div><div class="cable-v-internal"></div>
    <div class="zone-internet"><div style="font-size:60px;">â˜ï¸</div><div style="font-weight:bold;">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ</div></div>
    <div class="firewall"></div><div style="position:absolute; top:120px; left:410px; font-weight:bold; color:#d35400;">Firewall</div>
    <div class="zone-internal"><div style="font-size:50px;">ğŸ’»</div><div style="font-weight:bold;">å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</div></div>
    <div class="zone-dmz"><div style="font-size:40px;">ğŸ–¥ï¸</div><div style="font-weight:bold; color:#f39c12;">DMZ</div><div style="font-size:19px;">å…¬é–‹Webã‚µãƒ¼ãƒ</div></div>
  </div>

  <svg class="overlay-svg">
    <g id="p-ext-view" class="packet">
        <g class="req-part">
            <text x="0" y="0" class="p-icon eye-to-left">ğŸ‘€</text>
            <text x="0" y="40" class="p-text" fill="#27ae60">Webé–²è¦§ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</text>
        </g>
        <g class="res-part">
            <text x="0" y="0" class="p-icon">ğŸ–¼ï¸</text>
            <text x="0" y="40" class="p-text" fill="#2980b9">ãƒšãƒ¼ã‚¸ã‚’æä¾›</text>
        </g>
    </g>

    <g id="p-int-view" class="packet">
        <g class="req-part">
            <text x="0" y="0" class="p-icon eye-to-right">ğŸ‘€</text>
            <text x="0" y="40" class="p-text" fill="#27ae60">ç¤¾å†…Webé–²è¦§è¦æ±‚</text>
        </g>
        <g class="res-part">
            <text x="0" y="0" class="p-icon">ğŸ–¼ï¸</text>
            <text x="0" y="40" class="p-text" fill="#2980b9">å¿œç­”ãƒ‡ãƒ¼ã‚¿ï¼ˆæˆ»ã‚Šé€šä¿¡ï¼‰</text>
        </g>
    </g>

    <!-- â˜…â‘¥ å†…éƒ¨ â‡’ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ -->
    <g id="p-int-net" class="packet">
        <g class="req-part">
            <text x="0" y="0" class="p-icon eye-to-right">ğŸ‘€</text>
            <text x="0" y="40" class="p-text" fill="#27ae60">å¤–éƒ¨ã‚µã‚¤ãƒˆå–å¾—è¦æ±‚</text>
        </g>
        <g class="res-part">
            <text x="0" y="0" class="p-icon">ğŸ“„</text>
            <text x="0" y="40" class="p-text" fill="#2980b9">å¤–éƒ¨ã‹ã‚‰ã®å¿œç­”ï¼ˆæˆ»ã‚Šé€šä¿¡ï¼‰</text>
        </g>
    </g>

    <g id="p-int-update" class="packet">
      <text x="0" y="0" class="p-icon eye-to-right">ğŸ“</text>
      <text x="0" y="40" class="p-text" fill="#3498db">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°ãƒ‡ãƒ¼ã‚¿</text>
    </g>

    <g id="p-dmz-atk" class="packet">
        <g class="deny-req">
            <text x="0" y="0" class="p-icon eye-to-left">ğŸ‘€</text>
            <text x="0" y="40" class="p-text" fill="#27ae60">é‡è¦ãƒ‡ãƒ¼ã‚¿é–²è¦§è¦æ±‚</text>
        </g>
        <g class="deny-bad">
            <text x="0" y="0" class="p-icon">ğŸš«</text>
            <text x="0" y="40" class="p-text" fill="#e74c3c">æ‹’å¦ï¼šæ–°è¦ã®å†…éƒ¨ä¾µå…¥ã¯é®æ–­</text>
        </g>
    </g>

    <g id="p-ext-atk" class="packet">
        <g class="deny-req">
            <text x="0" y="0" class="p-icon eye-to-left">ğŸ‘€</text>
            <text x="0" y="40" class="p-text" fill="#27ae60">å†…éƒ¨ã‚µãƒ¼ãƒé–²è¦§è¦æ±‚</text>
        </g>
        <g class="deny-bad">
            <text x="0" y="0" class="p-icon">ğŸš«</text>
            <text x="0" y="40" class="p-text" fill="#e74c3c">æ‹’å¦ï¼šç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯</text>
        </g>
    </g>
  </svg>
</div>

<script>
  let autoInterval = null;
  const stage = document.getElementById('stage');
  const statusDisplay = document.getElementById('status-display');

  startAutoMode();

  function setMode(mode, btnElement) {
    document.querySelectorAll('.btn').forEach(b => b.classList.remove('active-mode'));
    if(btnElement) btnElement.classList.add('active-mode');
    resetAnimations();
    if (autoInterval) clearInterval(autoInterval);

    if (mode === 'auto') {
      startAutoMode();
    } else {
      stage.classList.add('mode-' + mode);
      updateStatus(mode);
    }
  }

  function updateStatus(mode) {
    const msg = {
      'ext-view': 'ã€æ­£å¸¸ã€‘ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰ã®æ­£è¦ãªé–²è¦§ãƒªã‚¯ã‚¨ã‚¹ãƒˆ',
      'int-view': 'ã€æ­£å¸¸ã€‘å†…éƒ¨PCã‹ã‚‰ã®Webé–²è¦§è¦æ±‚ã¨ã€ãã®æˆ»ã‚Šé€šä¿¡',
      'int-net':  'ã€æ­£å¸¸ã€‘å†…éƒ¨â‡’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå–å¾—ï¼ˆæˆ»ã‚Šé€šä¿¡ã‚‚è¨±å¯ï¼‰',
      'int-update': 'ã€æ­£å¸¸ã€‘ç®¡ç†è€…ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°ï¼ˆå†…éƒ¨â‡’DMZï¼‰',
      'dmz-atk': 'ã€æ‹’å¦ã€‘DMZã‹ã‚‰ã®æ–°è¦è¦æ±‚ï¼šFWãŒã€ŒçŸ¥ã‚‰ãªã„è¦æ±‚ã€ã¨ã—ã¦é®æ–­',
      'ext-atk': 'ã€æ‹’å¦ã€‘å¤–éƒ¨ã‹ã‚‰ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ï¼šFWãŒå¼·åˆ¶çš„ã«æŠ¼ã—æˆ»ã—ã¾ã™',
      'auto': 'è‡ªå‹•å·¡å›ä¸­...'
    };
    statusDisplay.textContent = msg[mode] || msg['auto'];
  }

  function resetAnimations() {
    stage.className = 'container';
    void stage.offsetWidth;
  }

  function startAutoMode() {
    let step = 0;
    const modes = ['ext-view', 'int-view', 'int-net', 'int-update', 'dmz-atk', 'ext-atk'];
    const runStep = () => {
      resetAnimations();
      setMode(modes[step]);
      updateStatus(modes[step]);
      step = (step + 1) % modes.length;
    };
    runStep();
    autoInterval = setInterval(runStep, 10000);
  }
</script>

</body>
</html>
